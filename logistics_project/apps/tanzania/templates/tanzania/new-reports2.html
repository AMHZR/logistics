{% extends base_template %}
{% load i18n %}
{% load nav_tags %}


{% load cache %}



{% block title %}{% trans 'Reports' %} - {{ block.super }}{% endblock %}
{% block stylesheets %}
    {{ block.super }}
    <link type="text/css" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" />
    <link type="text/css" rel="stylesheet" href="http://jquery-ui.googlecode.com/svn/trunk/ui/jquery.ui.tabs.js" />
    <link type="text/css" rel="stylesheet" href="{{ MEDIA_URL }}tanzania/stylesheets/tz-reports.css" />
{% endblock %}

{% block javascripts %}{{ block.super }}
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script>
    <script type="text/javascript" src="http://jquery-ui.googlecode.com/svn/trunk/ui/jquery.ui.tabs.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}logistics/javascripts/stock_init.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}logistics/javascripts/legend_hider.js"></script>
    <script language="javascript" type="text/javascript" src="{{ MEDIA_URL }}logistics/javascripts/jquery.flot.js"></script>
    <script language="javascript" type="text/javascript" src="{{ MEDIA_URL }}logistics/javascripts/jquery.flot.pie.js"></script>
    <script language="javascript" type="text/javascript" src="{{ MEDIA_URL }}logistics/javascripts/jquery.flot.stack.js"></script>


    <script type="text/javascript">
        $(function () {
            stock_init({{ months_minimum|default:"1" }}, {{ months_maximum|default:"3" }});
        });
        $(function() {
            $("#sidetabs").tabs().addClass('ui-tabs-vertical ui-helper-clearfix');
            $("#sidetabs li").removeClass('ui-corner-top').addClass('ui-corner-left');
        });
    </script>
{% endblock %}

{% block content %}


    <div style="margin-top: 1em; margin-bottom: 1em;">
        {% include "logistics/partials/breadcrumbs.html" %}
    </div>

    {% include "logistics/partials/month_pager.html" %}

    <div id="sidetabs">
        <ul>
            <li><a href="#soh">Stock On Hand</a></li>
            <li><a href="#randr">R&amp;R</a></li>
            <li><a href="#supervision">Supervision</a></li>
            <li><a href="#delivery">Delivery</a></li>
            <li><a href="#unrecognizedsms">Unrecognized SMS</a></li>
        </ul>

        <div id="soh">
            <div class="module">
                {% with soh_json as chart_data %}
                {% with month_pager.prev_month as last_month %}
                    {% include "tanzania/reports/soh_pie_chart.html" %}
                {% endwith %}{% endwith %}
            </div>

            <div class="module">
                <a id="stock"></a>

            </div>
        </div>

        <div id="randr">
            <div class="module">
                {% with rr_json as chart_data %}
                {% with month_pager.prev_month as last_month %}
                    {% include "tanzania/reports/rr_pie_chart.html" %}
                {% endwith %}{% endwith %}
            </div>

            <div class="module">
                <h2>R&amp;R Reporting History</h2>

            </div>
        </div>

        <div id="supervision">
            <div class="module">
                {% with supervision_json as chart_data %}
                {% with month_pager.prev_month as last_month %}
                    {% include "tanzania/reports/supervision_pie_chart.html" %}
                {% endwith %}{% endwith %}
            </div>
        </div>

        <div id="delivery">
            <div class="module">
                {% with delivery_json as chart_data %}
                {% with month_pager.prev_month as last_month %}
                    {% include "tanzania/reports/delivery_pie_chart.html" %}
                {% endwith %}{% endwith %}
            </div>
        </div>

        <div id="unrecognizedsms">

        </div>

    </div>
{% endblock %}
