{% extends base_template %}
{% load nav_tags %}
{% load cache %}
{% load i18n %}

{% block title %}Training Tools {{ block.super }}{% endblock %}
{% block stylesheets %}{{ block.super }}
<style type="text/css">
    div#facility-upload ol {
        list-style-type: decimal;
        list-style-position: inside;
    }
    div#facility-upload ol li {
        list-style: inherit;
        display: list-item;
        border: none;
        padding: .3em;
        margin: 0px;
    }
    input {
        padding: .2em .4em;
    }
    form#fac-upload {
        padding: .8em;
        margin-top: 1em;
    }
    form#fac-upload input[type=submit] {
        /* background-color: #d4ffaa; */
    }
</style>
{% endblock %}
{% block content %}
<h2>{% trans "Training tools" %}</h2>

<div class="module">
    <h3>Report data</h3>
		<form action="/tz/training/" method="post">
			{% csrf_token %}
			{% if not is_running %}
				{% trans "Data as of: " %} {{ latest_run_time|safe }} 
				<br><br>
				<input type="submit" name="submit" value= {% trans "Refresh Data" %} />
			{% else %}
				<input type="submit" disabled="true" name="submit" value= {% trans "Refresh Data" %} />
				{% trans "Currently running: started at " %} {{ latest_incomplete_time|safe }}
			{% endif %}
		</form>
	<br>
</div>
<div class="module" id="facility-upload">
    <h3>Facilities</h3>
    <p>To update the list of facilities:</p>
    <ol>
        <li>Download the <a href="{% url download_facilities %}">current facility list</a>.</li>
        <li>Edit the document as necessary. You can add new lines or edit existing lines. Make sure to preserve columns and format.</li>
        <li>If you want the upload to go faster, delete any rows you don't want to change.</li>        
        <li>When you're ready, upload the document here.</li>
    </ol>
    <form id="fac-upload" action="{% url upload_facilities %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_table }}
        <input type="submit" value="Update facilities"></input>
    </form>
</div>
<div class="module">
	<br>
	{% for f in files %}
		<br>
		<a href="/static/tanzania/downloads/training_documents/{{ f.link }}">{{ f.name }}</a>
		<br>
	{% endfor %}
	<br>
</div>

{% endblock %}